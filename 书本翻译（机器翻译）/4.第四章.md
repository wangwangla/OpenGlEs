# 着色器和程序

Shaders and Programs

在第二章“你好，三角形:一个OpenGL  ES  2.0的例子”中，我们向你介绍了一个绘制单个三角形的简单程序。在那个例子中，我们创建了两个着色器对象(一个用于顶点着色器，一个用于片段着色器)和一个程序对象来渲染三角形。着色器对象和程序对象是OpenGL  ES  2.0中使用着色器的基本概念。在本章中，我们将向您介绍如何创建着色器、编译它们以及将它们链接到一个程序对象的全部细节。编写顶点和片段着色器的细节将在本书后面介绍。目前，我们专注于:

In Chapter 2, “Hello, Triangle: An OpenGL ES 2.0 Example,” we introduced you  to a simple program that draws a single triangle. In that example, we created  two shader objects (one for the vertex shader and one for the fragment shader)  and a single program object to render the triangle. Shader objects and program  objects are fundamental concepts in working with shaders in OpenGL ES 2.0. In  this chapter, we introduce you to the full details on how to create shaders,  compile them, and link them together into a program object. The details of  writing vertex and fragment shaders come later in the book. For now, we focus  on:

- 着色器和程序对象概述

  Shader and program object overview

- 创建和编译着色器。

  Creating and compiling a shader.

- 创建和链接程序。

  Creating and linking a program.

- 获取和设置一个uniform.

  Getting and setting uniforms.

- 获取和设置属性。

  Getting and setting attributes.

- 着色器编译器和着色器二进制文件

  Shader compiler and shader binaries

## 着色器和程序

Shaders and Programs

使用着色器渲染时，需要创建两种基本的对象类型:着色器对象和程序对象。考虑着色器对象和程序对象的最佳方式是通过与C编译器和链接器进行比较。C编译器生成目标代码(例如。obj或。o文件),用于一段源代码。创建完目标文件后，链接器将目标文件链接到最终的程序中。

C compiler generates object code (e.g., .obj or .o files) for a piece of  source code.There are two fundamental object types you need to create to render with  shaders: shader objects and program objects. The best way to think of a shader  object and a program object is by comparison to a C compiler and  linker.After the object files have been created, the C linker then links the object  files into a final program.

OpenGL  ES中使用了类似的范例来表示着色器。着色器对象是包含单个着色器的对象。源代码被提供给着色器对象，然后着色器对象被编译成对象形式(像。obj文件)。编译后，着色器对象可以附加到程序对象。一个程序对象可以附加多个着色器对象。在OpenGL  ES中，每个程序对象都需要附加一个顶点着色器对象和一个片段着色器对象(不多也不少)。然后，程序对象被链接成最终的“可执行文件”最终的程序对象可用于渲染。

A similar paradigm is used in OpenGL ES for representing shaders. The shader  object is an object that contains a single shader. The source code is given to  the shader object and then the shader object is compiled into object form (like  an .obj file). After compilation, the shader object can then be attached to a  program object. A program object gets multiple shader objects attached to it. In  OpenGL ES, each program object will need to have one vertex shader object and  one fragment shader object attached to it (no more, and no less). The program  object is then linked into a final “executable.” The final program object can  then be used to render.

获取链接着色器对象的一般过程是首先创建一个顶点着色器对象和一个片段着色器对象，将源代码附加到它们中的每一个，然后编译它们。然后，创建一个程序对象，将编译后的着色器对象附加到其上，并将其链接起来。如果没有错误，你可以随时告诉总账使用该程序进行绘图。接下来的部分详细介绍了执行这个过程所需的应用编程接口调用。

The general process for getting to a linked shader object is to first create a  vertex shader object and a fragment shader object, attach source code to each of  them, and compile them. Then, you create a program object, attach the compiled  shader objects to it, and link it. If there are no errors, you can then tell the  GL to use the program for drawing any time you like. The next sections detail  the API calls you need to use to execute this process.

